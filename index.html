<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Catálogo de Perfumes</title>
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://i.imgur.com https://cdn-icons-png.flaticon.com; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f4f4f4;
    }
    header {
      background-color: #333;
      color: white;
      padding: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }
    header img {
      height: 80px;
    }
    .menu-btn {
      position: absolute;
      left: 20px;
      top: 25px;
      font-size: 28px;
      background: none;
      border: none;
      color: white;
      cursor: pointer;
    }
    /* Carrito en header */
    .cart-btn {
      position: absolute;
      right: 30px;
      top: 25px;
      text-decoration: none;
      background: none;
      border: none;
      font-size: 24px;
      display: flex;
      align-items: center;
    }
    .cart-btn img {
      width: 32px;
      vertical-align: middle;
    }
    .cart-count {
      background: red;
      color: white;
      border-radius: 50%;
      padding: 2px 7px;
      font-size: 0.9em;
      vertical-align: top;
      margin-left: -10px;
      min-width: 22px;
      text-align: center;
      display: inline-block;
    }
    .sidebar {
      height: 100%;
      width: 0;
      position: fixed;
      top: 0;
      left: 0;
      background-color: #000;
      overflow-x: hidden;
      transition: 0.3s;
      padding-top: 60px;
      max-width: 320px;
      z-index: 1000;
    }
    .sidebar a {
      padding: 15px 25px;
      text-decoration: none;
      color: white;
      display: block;
      font-size: 18px;
      transition: 0.2s;
    }
    .sidebar a:hover {
      background-color: #222;
    }
    .sidebar .submenu {
      margin-left: 20px;
    }
    .closebtn {
      position: absolute;
      top: 20px;
      right: 25px;
      font color: white;
      background: none;
      border: none;
      cursor: pointer;
    }
    .instagram-icon {
      width: 32px;
      margin: 40px 25px 0;
      filter: brightness(0) invert(1);
    }

    /* Catálogo */
    .catalogo {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 30px;
      padding: 40px 10px 60px;
    }
    .producto {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      width: 290px;
      padding: 20px;
      text-align: center;
      transition: box-shadow 0.2s;
    }
    .producto:hover {
      box-shadow: 0 4px 14px rgba(0,0,0,0.16);
    }
    .producto img {
      width: 100%;
      height: 210px;
      object-fit: cover;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    .producto h3 {
      margin: 12px 0 8px;
    }
    .producto p {
      color: #444;
      font-size: 15px;
    }
    .producto .precio {
      font-weight: bold;
      color: #222;
      margin: 13px 0;
    }
    .ver-detalle-btn, .agregar-btn {
      padding: 7px 16px;
      border-radius: 6px;
      border: none;
      font-size: 1em;
      cursor: pointer;
      margin: 6px 4px 0 4px;
    }
    .ver-detalle-btn {
      background: #333;
      color: #fff;
      text-decoration: none;
      display: inline-block;
    }
    .ver-detalle-btn:hover {
      background: #555;
    }
    .agregar-btn {
      background: #1976d2;
      color: #fff;
      border: none;
    }
    .agregar-btn:hover {
      background: #115293;
    }
    @media (max-width: 900px) {
      .catalogo { gap: 18px;}
      .producto { width: 95vw; max-width: 340px;}
    }
  </style>
</head>
<body>

  <div id="sidebar" class="sidebar">
    <button class="closebtn" onclick="closeSidebar()">×</button>
    <a href="#">Preguntas frecuentes</a>
    <a href="#">Productos</a>
    <div class="submenu">
      <a href="#">• Perfumes</a>
      <a href="#">• Masculinos</a>
      <a href="#">• Femeninos</a>
      <a href="#">• Unisex</a>
    </div>
    <a href="#">Contacto</a>
    <a href="https://instagram.com" target="_blank">
      <img class="instagram-icon" src="https://cdn-icons-png.flaticon.com/512/87/87390.png" alt="Instagram">
    </a>
  </div>

  <header>
    <button class="menu-btn" onclick="openSidebar()">☰</button>
    <img src="https://i.imgur.com/ss7a9jP.png" alt="Logo">
    <a href="carrito.html" class="cart-btn" aria-label="Ver carrito">
      <img src="https://cdn-icons-png.flaticon.com/512/107/107831.png" alt="Carrito">
      <span id="carrito-cantidad" class="cart-count" aria-live="polite" aria-atomic="true">0</span>
    </a>
  </header>

  <main>
    <h1 style="text-align:center; margin:40px 0 10px; color:#222;">Catálogo de Perfumes</h1>
    <div class="catalogo">

      <!-- Producto Gonzalo -->
      <div class="producto">
        <img src="https://i.imgur.com/6a1VHRQ.jpeg" alt="Perfume Gonzalo">
        <h3>Perfume Gonzalo</h3>
        <p>Fragancia intensa con notas aceitosas, perfecta para jugar al bascket y hacer triples.</p>
        <div class="precio">$3500</div>
        <a href="gonzalo.html" class="ver-detalle-btn">Ver detalle</a>
        <button class="agregar-btn" onclick="agregarProductoAlCarrito({id: '1', nombre: 'Perfume Gonzalo', precio: 3500})">Agregar</button>
      </div>

      <!-- Producto Joako -->
      <div class="producto">
        <img src="https://i.imgur.com/D7SY8Hv.jpeg" alt="Perfume Joako">
        <h3>Perfume Joako</h3>
        <p>Aroma fresco con toques frutales y florales. Un clásico que nunca falla, ideal para el día a día o eventos especiales.</p>
        <div class="precio">$4200</div>
        <a href="joako.html" class="ver-detalle-btn">Ver detalle</a>
        <button class="agregar-btn" onclick="agregarProductoAlCarrito({id: '2', nombre: 'Perfume Joako', precio: 4200})">Agregar</button>
      </div>

      <!-- Producto Dylan -->
      <div class="producto">
        <img src="https://i.imgur.com/HjDx5RW.jpeg" alt="Perfume Dylan">
        <h3>Perfume Dylan</h3>
        <p>Fragancia sofisticada y elegante, con notas amaderadas. Ideal para quienes buscan destacar con personalidad propia.</p>
        <div class="precio">$8700</div>
        <a href="dylan.html" class="ver-detalle-btn">Ver detalle</a>
        <button class="agregar-btn" onclick="agregarProductoAlCarrito({id: '3', nombre: 'Perfume Dylan', precio: 8700})">Agregar</button>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script>
    function openSidebar() {
      document.getElementById("sidebar").style.width = "80%";
    }
    function closeSidebar() {
      document.getElementById("sidebar").style.width = "0";
    }

    // Carrito funciones (puedes moverlas a carrito.js si prefieres)
    function actualizarCarritoCantidad() {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      let total = carrito.reduce((sum, prod) => sum + (parseInt(prod.cantidad) || 0), 0);
      const cantidad = document.getElementById('carrito-cantidad');
      if (cantidad) cantidad.textContent = total;
    }
    function agregarProductoAlCarrito(producto) {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const existente = carrito.find(item => item.id === producto.id);
      if (existente) {
        existente.cantidad = parseInt(existente.cantidad) + 1;
      } else {
        carrito.push({...producto, cantidad: 1});
      }
      localStorage.setItem('carrito', JSON.stringify(carrito));
      actualizarCarritoCantidad();
      alert('Producto agregado al carrito');
    }
    document.addEventListener('DOMContentLoaded', actualizarCarritoCantidad);
  </script>
</body>
</html>