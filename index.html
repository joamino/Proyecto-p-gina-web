<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Catálogo de Perfumes</title>
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://i.imgur.com https://cdn-icons-png.flaticon.com; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <style>
    /* ...el CSS completo como en el mensaje anterior... */
  </style>
</head>
<body>

  <div id="sidebar" class="sidebar">
    <button class="closebtn" onclick="closeSidebar()">×</button>
    <a href="#">Preguntas frecuentes</a>
    <a href="#">Productos</a>
    <div class="submenu">
      <a href="#">• Perfumes</a>
      <a href="#">• Masculinos</a>
      <a href="#">• Femeninos</a>
      <a href="#">• Unisex</a>
    </div>
    <a href="#">Contacto</a>
    <a href="https://instagram.com" target="_blank">
      <img class="instagram-icon" src="https://cdn-icons-png.flaticon.com/512/87/87390.png" alt="Instagram">
    </a>
  </div>

  <header>
    <button class="menu-btn" onclick="openSidebar()">☰</button>
    <img src="https://i.imgur.com/ss7a9jP.png" alt="Logo">
    <a href="carrito.html" class="cart-btn" aria-label="Ver carrito">
      <img src="https://cdn-icons-png.flaticon.com/512/107/107831.png" alt="Carrito">
      <span id="carrito-cantidad" class="cart-count" aria-live="polite" aria-atomic="true">0</span>
    </a>
  </header>

  <main>
    <h1 style="text-align:center; margin:40px 0 10px; color:#222;">Catálogo de Perfumes</h1>
    <div class="catalogo">

      <!-- Producto Gonzalo -->
      <div class="producto">
        <img src="https://i.imgur.com/6a1VHRQ.jpeg" alt="Perfume Gonzalo">
        <h3>Perfume Gonzalo</h3>
        <p>Fragancia intensa con notas aceitosas, perfecta para jugar al bascket y hacer triples.</p>
        <div class="precio">$3500</div>
        <a href="gonzalo.html" class="ver-detalle-btn">Ver detalle</a>
        <button class="agregar-btn" onclick="agregarProductoAlCarrito({id: '1', nombre: 'Perfume Gonzalo', precio: 3500})">Agregar</button>
      </div>

      <!-- Producto Joako -->
      <div class="producto">
        <img src="https://i.imgur.com/D7SY8Hv.jpeg" alt="Perfume Joako">
        <h3>Perfume Joako</h3>
        <p>Aroma fresco con toques frutales y florales. Un clásico que nunca falla, ideal para el día a día o eventos especiales.</p>
        <div class="precio">$4200</div>
        <a href="joako.html" class="ver-detalle-btn">Ver detalle</a>
        <button class="agregar-btn" onclick="agregarProductoAlCarrito({id: '2', nombre: 'Perfume Joako', precio: 4200})">Agregar</button>
      </div>

      <!-- Producto Dylan -->
      <div class="producto">
        <img src="https://i.imgur.com/HjDx5RW.jpeg" alt="Perfume Dylan">
        <h3>Perfume Dylan</h3>
        <p>Fragancia sofisticada y elegante, con notas amaderadas. Ideal para quienes buscan destacar con personalidad propia.</p>
        <div class="precio">$8700</div>
        <a href="dylan.html" class="ver-detalle-btn">Ver detalle</a>
        <button class="agregar-btn" onclick="agregarProductoAlCarrito({id: '3', nombre: 'Perfume Dylan', precio: 8700})">Agregar</button>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script>
    function openSidebar() {
      document.getElementById("sidebar").style.width = "80%";
    }
    function closeSidebar() {
      document.getElementById("sidebar").style.width = "0";
    }

    // Carrito funciones (puedes moverlas a carrito.js si prefieres)
    function actualizarCarritoCantidad() {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      let total = carrito.reduce((sum, prod) => sum + (parseInt(prod.cantidad) || 0), 0);
      const cantidad = document.getElementById('carrito-cantidad');
      if (cantidad) cantidad.textContent = total;
    }
    function agregarProductoAlCarrito(producto) {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const existente = carrito.find(item => item.id === producto.id);
      if (existente) {
        existente.cantidad = parseInt(existente.cantidad) + 1;
      } else {
        carrito.push({...producto, cantidad: 1});
      }
      localStorage.setItem('carrito', JSON.stringify(carrito));
      actualizarCarritoCantidad();
      alert('Producto agregado al carrito');
    }
    document.addEventListener('DOMContentLoaded', actualizarCarritoCantidad);
  </script>
</body>
</html>