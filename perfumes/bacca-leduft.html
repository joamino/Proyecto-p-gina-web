<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bacca – Leduft</title>
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://i.imgur.com https://cdn-icons-png.flaticon.com; script-src 'self'; style-src 'self' 'unsafe-inline';">
  <style>
    body { margin: 0; font-family: Arial, sans-serif; background: #f4f4f4; }
    header { background-color: #333; color: white; padding: 20px; display: flex; align-items: center; justify-content: center; position: relative; }
    header img { height: 80px; }
    .menu-btn { position: absolute; left: 20px; top: 25px; font-size: 28px; background: none; border: none; color: white; cursor: pointer; }
    .cart-btn { position: absolute; right: 30px; top: 25px; text-decoration: none; background: none; border: none; font-size: 24px; display: flex; align-items: center; }
    .cart-btn img { width: 32px; vertical-align: middle; }
    .cart-count { background: red; color: white; border-radius: 50%; padding: 2px 7px; font-size: 0.9em; vertical-align: top; margin-left: -10px; min-width: 22px; text-align: center; display: inline-block; }
    .sidebar { height: 100%; width: 0; position: fixed; top: 0; left: 0; background-color: #000; overflow-x: hidden; transition: 0.3s; padding-top: 60px; max-width: 320px; z-index: 1000; }
    .sidebar a { padding: 15px 25px; text-decoration: none; color: white; display: block; font-size: 18px; transition: 0.2s; }
    .sidebar a:hover { background-color: #222; }
    .sidebar .submenu { margin-left: 20px; }
    .closebtn { position: absolute; top: 20px; right: 25px; font-size: 30px; color: white; background: none; border: none; cursor: pointer; }
    .instagram-icon { width: 32px; margin: 40px 25px 0; filter: brightness(0) invert(1); }

    .producto-detalle { max-width: 600px; margin: 30px auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); display: flex; gap: 20px; }
    .producto-detalle .producto-imagen img { width: 100%; max-width: 250px; border-radius: 10px; cursor: pointer; }
    .producto-info { flex: 1; }
    .producto-info h1 { margin-top: 0; }
    .producto-info .precio { font-size: 1.5rem; color: #333; margin: 10px 0; }
    .producto-info h2 { margin: 15px 0 5px; }
    .producto-info ul { padding-left: 20px; }
    .producto-info button { margin-top: 20px; padding: 10px 25px; background: #333; color: #fff; border: none; border-radius: 5px; font-size: 1rem; cursor: pointer; transition: background 0.2s; }
    .producto-info button:hover { background: #555; }

    #lightbox { display: none; position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.9); justify-content:center; align-items:center; z-index:9999; }
    #lightbox img { max-width:90%; max-height:90%; border-radius:10px; box-shadow:0 0 10px #fff; cursor:pointer; }

    .volver-btn { display: inline-block; margin-top: 30px; padding: 10px 20px; background-color: #333; color: white; text-decoration: none; border-radius: 5px; transition: background-color 0.2s; }
    .volver-btn:hover { background-color: #555; }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar">
    <button class="closebtn" onclick="closeSidebar()">×</button>
    <a href="#">Preguntas frecuentes</a>
    <a href="#">Productos</a>
    <div class="submenu">
      <a href="#">• Perfumes</a>
      <a href="#">• Masculinos</a>
      <a href="#">• Femeninos</a>
      <a href="#">• Unisex</a>
    </div>
    <a href="#">Contacto</a>
    <a href="https://instagram.com" target="_blank">
      <img class="instagram-icon" src="https://cdn-icons-png.flaticon.com/512/87/87390.png" alt="Instagram">
    </a>
  </div>

  <!-- Header -->
  <header>
    <button class="menu-btn" onclick="openSidebar()">☰</button>
    <img src="https://i.imgur.com/ss7a9jP.png" alt="Logo">
    <a href="carrito.html" class="cart-btn" aria-label="Ver carrito">
      <img src="https://cdn-icons-png.flaticon.com/512/107/107831.png" alt="Carrito">
      <span id="carrito-cantidad" class="cart-count" aria-live="polite" aria-atomic="true">0</span>
    </a>
  </header>

  <!-- Producto -->
  <div class="producto-detalle" id="producto-1">
    <div class="producto-imagen">
      <img src="https://i.imgur.com/pp8q44G.jpeg" alt="Bacca – Baccarat Rouge Extrait">
    </div>
    <div class="producto-info">
      <h1>Bacca – Baccarat Rouge Extrait</h1>
      <p class="precio">$40.000</p>
      <h2>Notas</h2>
      <ul>
        <li><strong>Salida:</strong> Azafrán, Jazmín de Egipto</li>
        <li><strong>Corazón:</strong> Ámbar Gris, Madera de Ámbar</li>
        <li><strong>Fondo:</strong> Resinas Amaderadas, Cedro, Almizcle Blanco</li>
      </ul>
      <p id="descripcion"> <!-- Acá podés agregar la descripción extra --> </p>
      <button id="agregarAlCarrito">Agregar al carrito</button>
      <a class="volver-btn" href="index.html">← Volver al catálogo</a>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox">
    <img id="lightbox-img" src="" alt="Imagen ampliada">
  </div>

  <!-- Scripts -->
  <script>
    function openSidebar() { document.getElementById("sidebar").style.width = "80%"; }
    function closeSidebar() { document.getElementById("sidebar").style.width = "0"; }

    // Lightbox
    const detalleImg = document.querySelector('.producto-imagen img');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    detalleImg.addEventListener('click', () => {
      lightboxImg.src = detalleImg.src;
      lightbox.style.display = 'flex';
    });
    lightbox.addEventListener('click', () => { lightbox.style.display = 'none'; });

    // Carrito
    function actualizarCarritoCantidad() {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      let total = carrito.reduce((sum, prod) => sum + (parseInt(prod.cantidad) || 0), 0);
      const cantidad = document.getElementById('carrito-cantidad');
      if (cantidad) cantidad.textContent = total;
    }

    function agregarProductoAlCarrito(producto) {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const existente = carrito.find(item => item.id === producto.id);
      if (existente) { existente.cantidad = parseInt(existente.cantidad) + 1; }
      else { carrito.push({...producto, cantidad: 1}); }
      localStorage.setItem('carrito', JSON.stringify(carrito));
      actualizarCarritoCantidad();
    }

    document.addEventListener('DOMContentLoaded', actualizarCarritoCantidad);

    document.getElementById('agregarAlCarrito').addEventListener('click', function() {
      agregarProductoAlCarrito({
        id: "1",
        nombre: "Bacca – Leduft",
        precio: 40000
      });
      alert('Producto agregado al carrito');
    });
  </script>

</body>
</html>