<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Bacca – Leduft</title>
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' https://i.imgur.com https://cdn-icons-png.flaticon.com; script-src 'self'; style-src 'self' 'unsafe-inline';">

  <!-- Vincular tu CSS -->
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Sidebar -->
  <div id="sidebar" class="sidebar">
    <button class="closebtn" onclick="closeSidebar()">×</button>
    <a href="#">Preguntas frecuentes</a>
    <a href="#">Productos</a>
    <div class="submenu">
      <a href="#">• Perfumes</a>
      <a href="#">• Masculinos</a>
      <a href="#">• Femeninos</a>
      <a href="#">• Unisex</a>
    </div>
    <a href="#">Contacto</a>
    <a href="https://instagram.com" target="_blank">
      <img class="instagram-icon" src="https://cdn-icons-png.flaticon.com/512/87/87390.png" alt="Instagram">
    </a>
  </div>

  <!-- Encabezado -->
  <header>
    <button class="menu-btn" onclick="openSidebar()">☰</button>
    <img src="https://i.imgur.com/ss7a9jP.png" alt="Logo">
    <a href="carrito.html" class="cart-btn" aria-label="Ver carrito">
      <img src="https://cdn-icons-png.flaticon.com/512/107/107831.png" alt="Carrito">
      <span id="carrito-cantidad" class="cart-count" aria-live="polite" aria-atomic="true">0</span>
    </a>
  </header>

  <!-- Detalle del producto -->
  <div class="producto-detalle" id="producto-1">
    <div class="producto-imagen">
      <img src="https://i.imgur.com/pp8q44G.jpeg" alt="Bacca – Baccarat Rouge Extrait">
    </div>
    <div class="producto-info">
      <h1>Bacca – Baccarat Rouge Extrait</h1>
      <p class="precio">$40.000</p>
      <h2>Notas</h2>
      <ul>
        <li><strong>Salida:</strong> Azafrán, Jazmín de Egipto</li>
        <li><strong>Corazón:</strong> Ámbar Gris, Madera de Ámbar</li>
        <li><strong>Fondo:</strong> Resinas Amaderadas, Cedro, Almizcle Blanco</li>
      </ul>

      <!-- ESPACIO PARA TU DESCRIPCIÓN -->
      <p id="descripcion">Escribe aquí la descripción personalizada del perfume.</p>

      <!-- Botones -->
      <button id="agregarAlCarrito">Agregar al carrito</button>
      <a class="volver-btn" href="index.html">← Volver al catálogo</a>
    </div>
  </div>

  <!-- Lightbox -->
  <div id="lightbox">
    <img id="lightbox-img" src="" alt="Imagen ampliada">
  </div>

  <!-- Scripts -->
  <script>
    function openSidebar() { document.getElementById("sidebar").style.width = "80%"; }
    function closeSidebar() { document.getElementById("sidebar").style.width = "0"; }

    // Lightbox
    const detalleImg = document.querySelector('.producto-imagen img');
    const lightbox = document.getElementById('lightbox');
    const lightboxImg = document.getElementById('lightbox-img');
    detalleImg.addEventListener('click', () => {
      lightboxImg.src = detalleImg.src;
      lightbox.style.display = 'flex';
    });
    lightbox.addEventListener('click', () => { lightbox.style.display = 'none'; });

    // Carrito
    function actualizarCarritoCantidad() {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      let total = carrito.reduce((sum, prod) => sum + (parseInt(prod.cantidad) || 0), 0);
      const cantidad = document.getElementById('carrito-cantidad');
      if (cantidad) cantidad.textContent = total;
    }

    function agregarProductoAlCarrito(producto) {
      let carrito = JSON.parse(localStorage.getItem('carrito')) || [];
      const existente = carrito.find(item => item.id === producto.id);
      if (existente) {
        existente.cantidad = parseInt(existente.cantidad) + 1;
      } else {
        carrito.push({...producto, cantidad: 1});
      }
      localStorage.setItem('carrito', JSON.stringify(carrito));
      actualizarCarritoCantidad();
    }

    document.addEventListener('DOMContentLoaded', actualizarCarritoCantidad);

    document.getElementById('agregarAlCarrito').addEventListener('click', function() {
      agregarProductoAlCarrito({
        id: "1",
        nombre: "Bacca – Leduft",
        precio: 40000
      });
      alert('Producto agregado al carrito');
    });
  </script>

</body>
</html>